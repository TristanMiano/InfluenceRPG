{% extends "base.html" %}

{% block title %}Lobby - Influence RPG{% endblock %}

{% block css %}
  <link rel="stylesheet" href="{{ url_for('static', path=asset_path('lobby.css')) }}">
{% endblock %}

{% block content %}
  <div class="container lobby-container">
    <button id="menu-button" class="hamburger" aria-label="Menu">&#9776;</button>
	<!-- Dropdown panel (hidden by default) -->
    <div id="dropdown-menu">
      <a href="/profile?username={{username}}">Profile</a>
    </div>
    <h2>Game Lobby</h2>
    <p>Welcome, <span id="user-display"></span>!</p>

    <!-- Create Universe -->
    <section id="create-universe-link">
      <h3>Create New Universe</h3>
      <a href="/universe/new?username={{username}}" class="btn-link">Go to Universe Creation →</a>
    </section>

    <!-- Create Character -->
    <section id="create-character-link">
      <h3>Create New Character</h3>
      <a href="/character/new?username={{username}}">Go to Character Creation →</a>
    </section>

    <!-- Create New Game -->
    <section id="create-game-link" class="lobby-section">
      <h3>Create New Game</h3>
      <a href="/game/new?username={{username}}" class="btn-link">Go to Game Creation →</a>
    </section>

    <!-- Character Selection -->
    <label for="character-select">Select Your Character:</label>
    <select id="character-select"></select>

    <!-- Join Existing Game -->
    <section id="join-game-form">
      <h3>Join Existing Game</h3>
      <button id="refresh-games-button">Refresh Game List</button>
      <div id="game-list"></div>

      <label for="join-game-id">Game ID to Join:</label>
      <input type="text" id="join-game-id" placeholder="Enter game ID" />
      <button id="join-game-button">Join Game</button>
      <p id="join-game-error" class="error"></p>
    </section>
  </div>
{% endblock %}

{% block scripts %}
  <script type="module" src="{{ url_for('static', path=asset_path('lobby.jsx')) }}"></script>
{% endblock %}
